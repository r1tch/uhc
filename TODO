- Logging - DONE
- Configuration - DONE
- Event loop + TCP server - DONE
- Modules one by one:
  - Remote controller, own protocol (TCP server)
    - first only allow from same network - DONE
    - authentication later:
      - pw in cfg file first
      - no auth if on same network (also config option)
      - otherwise simple challenge-response auth - http://www.hcsw.org/reading/chalresp.txt (challenge random data, resp: md5(data+pw))
    - ping: if same network, every 5 secs; otherwise every 60secs -- maybe only from client?
    - abstraction: Services, subscriber (events) & commands 
      - Service: one instance of each class (for now)
        - msg can be sent; originator as param
        - QUERY-RESPONSE (also via TCP): directed response can be sent to originator service, specifying original msg in "origMsg"
          - TcpServer will add a "connection" member into its msg (to the json data)
          - upon response, "origMsg" member will contain original connection -> that's how we know where to send to
        - eg 1: zwave got list of nodes -> Controller.broadcast(nodes) -> calls Service.msg(zwave, nodes), no response expected
        - eg 2: query list of nodes: tcpserver calls zwave.msg(tcpserver, { msg: getNodes }); zwave calls tcpserver.msg(zwave, nodesAsDict)
      - Controller: repository of services - DONE
      - TcpServer also a Service - DONE
      - Automators are services as well
  - ZWave - via json
    - async http - DONE
    - yes, json, simple: https://docs.python.org/2/library/json.html
    - dl devices - DONE
    - remote ctrl:
      - queryable list - DONE
      - on-off - DONE
  - Simple Android client; initially ZWave control only
  - XBMC
    - osmc2 - play music library from stora
    - remote control of osmc/kodi
  - IR -- lirc! No lib needed, proto is dead simple
  - Paradox
  - AutoShade -- using entry/exit/sunrise/sunset
  - SleepSecurity -- sleep detection, etc
  - Media -- movie mode & co


  ----- Android Client
  - Names: UHC - Universal Home Control -- hlome, hyome, etc... Why? Needed a .com address :)
  - Design:
    - see Google Photos:
      - icon tabs on the bottom to choose between screens (http://developer.android.com/training/implementing-navigation/lateral.html#PagerTitleStrip ?)
      - AppBar on top
      - _no_ navigation drawer (only later for multiple connections???)
      - "..." for settings -- well, make The Gear the only button for now
  - Workings:
    - one activity, swipe-tabs PagerTitleStrip w icons on bottom -- DONE
    - icons on bottom: later? maybe now we could do it since scroll problem is sorted out
    - fragments for the tabs: - DONE
      - shades
      - lights
      - media -- should include projector + hifi
      - climate (A/C and then Loxone interface?)
      - security (display movements, sleep time, intercom)
    - save list of ZWave nodes & status updates in shared prefs
    - create a list of lights with on-off switch
    - ...then shades, with up-stop-down switches; with feedback
    - Service: handles connectivity and auto-reconnects; service running -> connected
      - also handles screen wakeup (subclass?)
    - Activity:
      - onResume: gets service reference -- http://stackoverflow.com/questions/10482171/how-to-get-reference-to-running-service
      - onPause: tells svc to remove Activity
      - registers it in the service for updates (to avoid comm via intents)
        - note: tcp-induced callbacks must use runOnUIThread!
      - fn calls can deliver json-generated objects
  - Settings
    - accessible from menu via menu btn
    - host, port for now
    - Server Configuration -- changes and uploads server config settings, LATER
  - ----------- continue HERE --------------------
  - Paradox support - to report events - TESTING NEEDED
  - SunRiseSet
  - automators:
    - shades
    - sleep detection
    - etc
  - IR module - should be easy with udpirsend, soldering needed
  - List of lights with on-off switch
    - LATER: long-press for dimmers, exact settings
    - LATER: icon for dimmer & on-off
  - List of shades - 3 buttons
    - LATER: long-press for level setting
  - all other modules...

  {"msg": "gotNodes", "fromService": "zwave", "nodes": [{"id": 1, "level": 0, "name": "ZWave", "type": "ZWaveNetwork"}, {"id": 2, "level": 0, "name": "_Scene Controller", "type": "SceneController"}, {"id": 4, "level": 0, "name": "NappaliEbedlo", "type": "BinaryLight"}, {"id": 5, "level": 0, "name": "NappaliKanape", "type": "BinaryLight"}, {"id": 6, "level": 100, "name": "Konyha", "type": "BinaryLight"}, {"id": 7, "level": 0, "name": "Dolgozo", "type": "BinaryLight"}, {"id": 8, "level": 0, "name": "Eloszoba", "type": "BinaryLight"}, {"id": 11, "level": 0, "name": "Furdonagy", "type": "BinaryLight"}, {"id": 12, "level": 0, "name": "Furdokad", "type": "DimmableLight"}, {"id": 13, "level": 0, "name": "Halo", "type": "BinaryLight"}, {"id": 14, "level": 100, "name": "HaloRedony", "type": "WindowCovering"}, {"id": 15, "level": 100, "name": "DolgozoRedony", "type": "WindowCovering"}, {"id": 16, "level": 0, "name": "LiloRedony", "type": "WindowCovering"}, {"id": 18, "level": 0, "name": "KonyhaRedony", "type": "WindowCovering"}, {"id": 19, "level": 100, "name": "NappaliUtcaRedony", "type": "WindowCovering"}, {"id": 20, "level": 0, "name": "NappaliErkelyRedony", "type": "WindowCovering"}, {"id": 21, "level": 100, "name": "NappaliKertRedony", "type": "WindowCovering"}, {"id": 22, "level": 100, "name": "NappaliOldalRedony", "type": "WindowCovering"}, {"id": 23, "level": 0, "name": "ErkelyLampa", "type": "BinaryLight"}, {"id": 24, "level": 0, "name": "ZTH100 Controller", "type": "SceneController"}, {"id": 25, "level": 0, "name": "Lilo", "type": "DimmableLight"}, {"id": 26, "level": 100, "name": "Vaszon", "type": "WindowCovering"}]}
{"changedLevels": {"6": 0}, "msg": "changedLevels", "fromService": "zwave"}

 {"service": "kodi", "jsonrpc": "2.0", "method": "Playlist.GetPlaylists"}
